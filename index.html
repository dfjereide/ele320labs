<!DOCTYPE html>
<html lang="en">
<body style="font-family:sans-serif;">
  <h1>ELE320 Labs</h1>
  <iframe
    id="pdf-frame"
    src="about:blank"
    width="100%"
    style="border:none;display:block;">
  </iframe>
  <script>
    (function () {
      const pdfUrl = new URL("manuals/ele320lab2_1.pdf", window.location.href);
      const viewerUrl = new URL("pdfjs/web/viewer.html", window.location.href);
      viewerUrl.searchParams.set("file", pdfUrl.href);

      const iframe = document.getElementById("pdf-frame");
      iframe.src = `${viewerUrl.href}#toolbar=0`;
      document.getElementById("download-link").href = pdfUrl.href;
      document.getElementById("viewer-link").href = viewerUrl.href;
      iframe.addEventListener("load", () => {
        const viewerWindow = iframe.contentWindow;
        const viewerDoc = viewerWindow.document;

        const resize = () => {
          iframe.style.height = `${viewerDoc.documentElement.scrollHeight}px`;
        };

        viewerWindow.PDFViewerApplication.initializedPromise.then(() => {
          const container = viewerDoc.getElementById("viewerContainer");
          container.style.height = "auto";
          container.style.overflow = "visible";
          viewerDoc.documentElement.style.overflow = "visible";
          viewerDoc.body.style.overflow = "visible";

          const bus = viewerWindow.PDFViewerApplication.eventBus;
          bus.on("pagesinit", resize);
          bus.on("pagerendered", resize);
          bus.on("scalechanging", resize);
        });
      });
    })();
  </script>
</body>
</html>
